#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤ –º–∞—Ä–∫–æ–≤—Å–∫–æ–π –°–ú–û - –°–∏—Å—Ç–µ–º–∞ 1
"""

import numpy as np
from numpy.linalg import solve

# ============================================================================
# –ü–ê–†–ê–ú–ï–¢–†–´ –°–ò–°–¢–ï–ú–´
# ============================================================================

LAMBDA = 0.7        # –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
B = 10.0            # –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
MU = 1.0 / B        # –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (0.1)

# –ò–∑ –º–∞—Ç—Ä–∏—Ü—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:
LAMBDA_1 = 0.525    # –ü–æ—Ç–æ–∫ –Ω–∞ –ü1
LAMBDA_2 = 0.175    # –ü–æ—Ç–æ–∫ –Ω–∞ –ü2
P1 = LAMBDA_1 / LAMBDA  # 0.75
P2 = LAMBDA_2 / LAMBDA  # 0.25

# ============================================================================
# –ü–û–°–¢–†–û–ï–ù–ò–ï –ú–ê–¢–†–ò–¶–´ –ü–ï–†–ï–•–û–î–û–í
# ============================================================================

def build_transition_matrix():
    """
    –°—Ç—Ä–æ–∏—Ç –º–∞—Ç—Ä–∏—Ü—É –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–µ–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ Q –¥–ª—è –°–∏—Å—Ç–µ–º—ã 1
    
    –°–æ—Å—Ç–æ—è–Ω–∏—è:
    S0: 0/0/0 - –ø—É—Å—Ç–æ
    S1: 1/0/0 - 1 –Ω–∞ –ü1
    S2: 0/1/0 - 1 –Ω–∞ –ü2
    S3: 1/1/0 - 1 –Ω–∞ –ü1, 1 –Ω–∞ –ü2
    S4: 0/1/1 - 1 –Ω–∞ –ü2, 1 –≤ –æ—á–µ—Ä–µ–¥–∏
    S5: 0/1/2 - 1 –Ω–∞ –ü2, 2 –≤ –æ—á–µ—Ä–µ–¥–∏
    S6: 1/1/1 - 1 –Ω–∞ –ü1, 1 –Ω–∞ –ü2, 1 –≤ –æ—á–µ—Ä–µ–¥–∏
    S7: 0/1/3 - 1 –Ω–∞ –ü2, 3 –≤ –æ—á–µ—Ä–µ–¥–∏ (–ø–æ–ª–Ω–∞—è)
    S8: 1/1/2 - 1 –Ω–∞ –ü1, 1 –Ω–∞ –ü2, 2 –≤ –æ—á–µ—Ä–µ–¥–∏
    S9: 1/1/3 - 1 –Ω–∞ –ü1, 1 –Ω–∞ –ü2, 3 –≤ –æ—á–µ—Ä–µ–¥–∏ (–ø–æ–ª–Ω–∞—è)
    """
    Q = np.zeros((10, 10))
    
    # –ó–∞–ø–æ–ª–Ω—è–µ–º –º–∞—Ç—Ä–∏—Ü—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
    # S0
    Q[0, 1] = 0.525
    Q[0, 2] = 0.175
    
    # S1
    Q[1, 0] = 0.100
    Q[1, 3] = 0.175
    
    # S2
    Q[2, 0] = 0.100
    Q[2, 3] = 0.525
    Q[2, 4] = 0.175
    
    # S3
    Q[3, 1] = 0.100
    Q[3, 2] = 0.100
    Q[3, 7] = 0.175
    
    # S4
    Q[4, 2] = 0.100
    Q[4, 5] = 0.175
    Q[4, 7] = 0.525
    
    # S5
    Q[5, 4] = 0.100
    Q[5, 6] = 0.175
    Q[5, 8] = 0.525
    
    # S6
    Q[6, 5] = 0.100
    Q[6, 9] = 0.525
    
    # S7
    Q[7, 3] = 0.100
    Q[7, 4] = 0.100
    Q[7, 8] = 0.175
    
    # S8
    Q[8, 5] = 0.100
    Q[8, 7] = 0.100
    Q[8, 9] = 0.175
    
    # S9
    Q[9, 6] = 0.100
    Q[9, 8] = 0.100
    
    # –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∏–∞–≥–æ–Ω–∞–ª—å (—Å—É–º–º–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–µ–π, —Å–æ –∑–Ω–∞–∫–æ–º –º–∏–Ω—É—Å)
    for i in range(10):
        Q[i, i] = -np.sum(Q[i, :])
    
    return Q

# ============================================================================
# –†–ï–®–ï–ù–ò–ï –°–ò–°–¢–ï–ú–´
# ============================================================================

def solve_steady_state(Q):
    """
    –†–µ—à–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É Q^T * œÄ = 0 —Å —É—Å–ª–æ–≤–∏–µ–º Œ£œÄ_i = 1
    """
    n = Q.shape[0]
    
    # –°–æ–∑–¥–∞–µ–º —Å–∏—Å—Ç–µ–º—É —É—Ä–∞–≤–Ω–µ–Ω–∏–π
    # Q^T * œÄ = 0, –∑–∞–º–µ–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ Œ£œÄ_i = 1
    A = Q.T.copy()
    A[-1, :] = 1.0
    
    b = np.zeros(n)
    b[-1] = 1.0
    
    # –†–µ—à–∞–µ–º —Å–∏—Å—Ç–µ–º—É
    pi = solve(A, b)
    
    return pi

# ============================================================================
# –†–ê–°–ß–ï–¢ –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö
# ============================================================================

def calculate_metrics(pi):
    """
    –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
    """
    results = {}
    
    # –ó–∞–≥—Ä—É–∑–∫–∞ (œÅ) - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –ø—Ä–∏–±–æ—Ä –∑–∞–Ω—è—Ç
    # –ü1 –∑–∞–Ω—è—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö: S1, S3, S6, S8, S9
    results['rho_1'] = pi[1] + pi[3] + pi[6] + pi[8] + pi[9]
    
    # –ü2 –∑–∞–Ω—è—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö: S2, S3, S4, S5, S6, S7, S8, S9
    results['rho_2'] = 1 - (pi[0] + pi[1])
    
    results['rho_total'] = (results['rho_1'] + results['rho_2']) / 2.0
    
    # –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä—å (œÄ)
    # –ü1: –Ω–µ—Ç –æ—á–µ—Ä–µ–¥–∏, –ø–æ—ç—Ç–æ–º—É œÄ‚ÇÅ = œÅ‚ÇÅ
    results['pi_1'] = results['rho_1']
    
    # –ü2: –æ—á–µ—Ä–µ–¥—å –ø–æ–ª–Ω–∞—è (3 –≤ –æ—á–µ—Ä–µ–¥–∏) - —Å–æ—Å—Ç–æ—è–Ω–∏—è S7, S9
    results['pi_2'] = pi[7] + pi[9]
    
    results['pi_total'] = P1 * results['pi_1'] + P2 * results['pi_2']
    
    # –î–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ (l)
    results['l_1'] = 0.0  # –£ –ü1 –Ω–µ—Ç –æ—á–µ—Ä–µ–¥–∏
    
    # –£ –ü2: 1 –≤ –æ—á–µ—Ä–µ–¥–∏ (S4,S6), 2 –≤ –æ—á–µ—Ä–µ–¥–∏ (S5,S8), 3 –≤ –æ—á–µ—Ä–µ–¥–∏ (S7,S9)
    results['l_2'] = (1.0 * (pi[4] + pi[6]) + 
                      2.0 * (pi[5] + pi[8]) + 
                      3.0 * (pi[7] + pi[9]))
    
    results['l_total'] = results['l_1'] + results['l_2']
    
    # –ß–∏—Å–ª–æ –∑–∞—è–≤–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ (m = l + œÅ)
    results['m_1'] = results['l_1'] + results['rho_1']
    results['m_2'] = results['l_2'] + results['rho_2']
    results['m_total'] = results['m_1'] + results['m_2']
    
    # –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (Œª' = Œª(1-œÄ))
    results['lambda_1_eff'] = (1.0 - results['pi_1']) * LAMBDA_1
    results['lambda_2_eff'] = (1.0 - results['pi_2']) * LAMBDA_2
    results['lambda_total_eff'] = results['lambda_1_eff'] + results['lambda_2_eff']
    
    # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ—è (Œ∑ = 1 - œÅ)
    results['eta_1'] = 1.0 - results['rho_1']
    results['eta_2'] = 1.0 - results['rho_2']
    results['eta_total'] = 1.0 - results['rho_total']
    
    # –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è (w = l / Œª')
    results['w_1'] = 0.0  # –ù–µ—Ç –æ—á–µ—Ä–µ–¥–∏
    results['w_2'] = results['l_2'] / results['lambda_2_eff'] if results['lambda_2_eff'] > 0 else 0
    results['w_total'] = results['l_total'] / results['lambda_total_eff'] if results['lambda_total_eff'] > 0 else 0
    
    # –í—Ä–µ–º—è –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è (u = w + b)
    results['u_1'] = results['w_1'] + B
    results['u_2'] = results['w_2'] + B
    results['u_total'] = results['w_total'] + B
    
    # –ù–∞–≥—Ä—É–∑–∫–∞ (y = Œª * b)
    results['y_1'] = LAMBDA_1 * B
    results['y_2'] = LAMBDA_2 * B
    results['y_total'] = results['y_1'] + results['y_2']
    
    return results

# ============================================================================
# –í–´–í–û–î –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
# ============================================================================

def print_header():
    """–ü–µ—á–∞—Ç–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫"""
    print("=" * 80)
    print("  –ü–†–û–í–ï–†–ö–ê –ú–ê–†–ö–û–í–°–ö–û–ô –°–ò–°–¢–ï–ú–´ –ú–ê–°–°–û–í–û–ì–û –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–Ø - –°–ò–°–¢–ï–ú–ê 1")
    print("=" * 80)
    print()

def print_parameters():
    """–ü–µ—á–∞—Ç–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã"""
    print("–ü–ê–†–ê–ú–ï–¢–†–´ –°–ò–°–¢–ï–ú–´:")
    print("-" * 80)
    print(f"  Œª  = {LAMBDA:.3f} –∑–∞—è–≤–æ–∫/—Å–µ–∫ (–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞)")
    print(f"  b  = {B:.1f} —Å–µ–∫ (—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)")
    print(f"  Œº  = {MU:.3f} –∑–∞–≤–µ—Ä—à–µ–Ω–∏–π/—Å–µ–∫")
    print(f"  P‚ÇÅ = {P1:.2f} (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–∞ –ø—Ä–∏–±–æ—Ä 1)")
    print(f"  P‚ÇÇ = {P2:.2f} (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–∞ –ø—Ä–∏–±–æ—Ä 2)")
    print(f"  Œª‚ÇÅ = {LAMBDA_1:.3f} –∑–∞—è–≤–æ–∫/—Å–µ–∫ –Ω–∞ –ü1")
    print(f"  Œª‚ÇÇ = {LAMBDA_2:.3f} –∑–∞—è–≤–æ–∫/—Å–µ–∫ –Ω–∞ –ü2")
    print()

def print_matrix(Q):
    """–ü–µ—á–∞—Ç–∞–µ—Ç –º–∞—Ç—Ä–∏—Ü—É –ø–µ—Ä–µ—Ö–æ–¥–æ–≤"""
    print("–ú–ê–¢–†–ò–¶–ê –ò–ù–¢–ï–ù–°–ò–í–ù–û–°–¢–ï–ô –ü–ï–†–ï–•–û–î–û–í Q:")
    print("-" * 80)
    print("      ", end="")
    for j in range(10):
        print(f"   S{j}    ", end="")
    print()
    
    for i in range(10):
        print(f"S{i}  ", end="")
        for j in range(10):
            print(f"{Q[i, j]:8.5f} ", end="")
        print()
    print()

def print_probabilities(pi, expected):
    """–ü–µ—á–∞—Ç–∞–µ—Ç —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏"""
    print("–°–¢–ê–¶–ò–û–ù–ê–†–ù–´–ï –í–ï–†–û–Ø–¢–ù–û–°–¢–ò:")
    print("-" * 80)
    print("–°–æ—Å—Ç–æ—è–Ω–∏–µ | –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ | –í–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –†–∞–∑–Ω–∏—Ü–∞    | –°—Ç–∞—Ç—É—Å")
    print("-" * 80)
    
    max_diff = 0.0
    for i in range(10):
        diff = pi[i] - expected[i]
        status = "‚úì" if abs(diff) < 0.001 else "‚úó"
        print(f"   p{i}    | {pi[i]:10.6f} | {expected[i]:13.6f} | {diff:+10.6f} |  {status}")
        max_diff = max(max_diff, abs(diff))
    
    print("-" * 80)
    print(f"–°—É–º–º–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π: {np.sum(pi):.10f}")
    print(f"–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞: {max_diff:.6f}")
    
    if max_diff < 0.001:
        print("‚úì –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç! –°—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ü–†–ê–í–ò–õ–¨–ù–´–ï")
    else:
        print("‚úó –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–ª–∏—á–∞—é—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Ç—Ä–∏—Ü—É –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.")
    print()

def print_metrics(results, your_values):
    """–ü–µ—á–∞—Ç–∞–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã"""
    print("=" * 80)
    print("  –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò –°–ò–°–¢–ï–ú–´")
    print("=" * 80)
    print()
    
    metrics = [
        ("–ù–∞–≥—Ä—É–∑–∫–∞ y‚ÇÅ", results['y_1'], your_values.get('y_1')),
        ("–ù–∞–≥—Ä—É–∑–∫–∞ y‚ÇÇ", results['y_2'], your_values.get('y_2')),
        ("–ó–∞–≥—Ä—É–∑–∫–∞ œÅ‚ÇÅ", results['rho_1'], your_values.get('rho_1')),
        ("–ó–∞–≥—Ä—É–∑–∫–∞ œÅ‚ÇÇ", results['rho_2'], your_values.get('rho_2')),
        ("–í–µ—Ä. –ø–æ—Ç–µ—Ä—å œÄ‚ÇÅ", results['pi_1'], your_values.get('pi_1')),
        ("–í–µ—Ä. –ø–æ—Ç–µ—Ä—å œÄ‚ÇÇ", results['pi_2'], your_values.get('pi_2')),
        ("–î–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ l‚ÇÅ", results['l_1'], your_values.get('l_1')),
        ("–î–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ l‚ÇÇ", results['l_2'], your_values.get('l_2')),
        ("–ß–∏—Å–ª–æ –∑–∞—è–≤–æ–∫ m‚ÇÅ", results['m_1'], your_values.get('m_1')),
        ("–ß–∏—Å–ª–æ –∑–∞—è–≤–æ–∫ m‚ÇÇ", results['m_2'], your_values.get('m_2')),
        ("–ü—Ä–æ–∏–∑–≤–æ–¥-—Ç—å Œª‚ÇÅ'", results['lambda_1_eff'], your_values.get('lambda_1_eff')),
        ("–ü—Ä–æ–∏–∑–≤–æ–¥-—Ç—å Œª‚ÇÇ'", results['lambda_2_eff'], your_values.get('lambda_2_eff')),
        ("–ö–æ—ç—Ñ. –ø—Ä–æ—Å—Ç–æ—è Œ∑‚ÇÅ", results['eta_1'], your_values.get('eta_1')),
        ("–ö–æ—ç—Ñ. –ø—Ä–æ—Å—Ç–æ—è Œ∑‚ÇÇ", results['eta_2'], your_values.get('eta_2')),
        ("–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è w‚ÇÅ", results['w_1'], your_values.get('w_1')),
        ("–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è w‚ÇÇ", results['w_2'], your_values.get('w_2')),
        ("–í—Ä–µ–º—è –ø—Ä–µ–±—ã–≤. u‚ÇÅ", results['u_1'], your_values.get('u_1')),
        ("–í—Ä–µ–º—è –ø—Ä–µ–±—ã–≤. u‚ÇÇ", results['u_2'], your_values.get('u_2')),
    ]
    
    print("–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞      | –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ | –í–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –†–∞–∑–Ω–∏—Ü–∞   | –°—Ç–∞—Ç—É—Å")
    print("-" * 80)
    
    errors = 0
    for name, correct, yours in metrics:
        if yours is not None:
            diff = correct - yours
            status = "‚úì" if abs(diff) < 0.001 else "‚úó"
            if abs(diff) >= 0.001:
                errors += 1
            print(f"{name:19} | {correct:10.6f} | {yours:13.6f} | {diff:+9.6f} | {status}")
        else:
            print(f"{name:19} | {correct:10.6f} |       -       |     -     | -")
    
    print("-" * 80)
    print()
    
    # –ö—Ä–∏—Ç–µ—Ä–∏–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    print("üéØ –ö–†–ò–¢–ï–†–ò–ô –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞—Ä–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏")
    print("-" * 80)
    yours_l = your_values.get('l_total')
    if yours_l is not None:
        diff = results['l_total'] - yours_l
        print(f"  –í–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ:    l = {yours_l:.6f}")
        print(f"  –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ:       l = {results['l_total']:.6f}")
        print(f"  –†–∞–∑–Ω–∏—Ü–∞:              {diff:+.6f} ({diff/yours_l*100:+.2f}%)")
        if abs(diff) > 0.001:
            print()
            print("  ‚ö†Ô∏è  –í–ê–ñ–ù–û: –≠—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –°–∏—Å—Ç–µ–º–æ–π 2!")
    else:
        print(f"  –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: l = {results['l_total']:.6f}")
    print()
    
    if errors > 0:
        print(f"‚ö†Ô∏è  –ù–∞–π–¥–µ–Ω–æ {errors} –æ—à–∏–±–æ–∫ –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö")
        print("\nüìñ –ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ —Ñ–∞–π–ª–∞—Ö:")
        print("   ‚Üí –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï_–†–ï–ó–£–õ–¨–¢–ê–¢–´.md")
        print("   ‚Üí detailed_comparison.txt")
    else:
        print("‚úÖ –í—Å–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ!")

# ============================================================================
# –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø
# ============================================================================

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    print_header()
    print_parameters()
    
    # –°—Ç—Ä–æ–∏–º –º–∞—Ç—Ä–∏—Ü—É
    Q = build_transition_matrix()
    print_matrix(Q)
    
    # –†–µ—à–∞–µ–º —Å–∏—Å—Ç–µ–º—É
    pi = solve_steady_state(Q)
    
    # –í–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã—Ö –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
    your_probabilities = np.array([
        0.007786, 0.040874, 0.013625, 0.071530, 0.023843,
        0.041726, 0.073020, 0.125178, 0.219061, 0.383357
    ])
    
    print_probabilities(pi, your_probabilities)
    
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    results = calculate_metrics(pi)
    
    # –í–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
    your_values = {
        'y_1': 5.25,
        'y_2': 1.05,  # ‚úó –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1.75
        'rho_1': 0.840000,  # ‚úó –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.787843
        'rho_2': 0.951340,
        'pi_1': 0.840000,  # ‚úó –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.787843
        'pi_2': 0.456377,  # ‚úó –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.508534
        'l_1': 0.000000,
        'l_2': 2.039726,  # ‚úó –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 2.144041
        'l_total': 2.039726,  # ‚úó –í–ê–ñ–ù–û –î–õ–Ø –ö–†–ò–¢–ï–†–ò–Ø!
        'm_1': 0.840000,
        'm_2': 2.991066,
        'lambda_1_eff': 0.084000,
        'lambda_2_eff': 0.095134,
        'eta_1': 0.160000,
        'eta_2': 0.048660,
        'w_1': 0.000000,
        'w_2': 21.440559,
        'u_1': 10.000000,
        'u_2': 31.440559,
    }
    
    print_metrics(results, your_values)
    
    # –í—ã–≤–æ–¥–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    print()
    print("=" * 80)
    print("  –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –î–õ–Ø –û–¢–ß–ï–¢–ê")
    print("=" * 80)
    print()
    print("–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞          |   –ü1    |   –ü2     | –°–∏—Å—Ç–µ–º–∞")
    print("-" * 80)
    print(f"–ù–∞–≥—Ä—É–∑–∫–∞ y             | {results['y_1']:7.2f} | {results['y_2']:8.2f} | {results['y_total']:7.2f}")
    print(f"–ó–∞–≥—Ä—É–∑–∫–∞ œÅ             | {results['rho_1']:7.6f} | {results['rho_2']:8.6f} | {results['rho_total']:7.6f}")
    print(f"–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä—å œÄ   | {results['pi_1']:7.6f} | {results['pi_2']:8.6f} | {results['pi_total']:7.6f}")
    print(f"–î–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ l        | {results['l_1']:7.6f} | {results['l_2']:8.6f} | {results['l_total']:7.6f}")
    print(f"–ß–∏—Å–ª–æ –∑–∞—è–≤–æ–∫ m         | {results['m_1']:7.6f} | {results['m_2']:8.6f} | {results['m_total']:7.6f}")
    print(f"–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Œª'  | {results['lambda_1_eff']:7.6f} | {results['lambda_2_eff']:8.6f} | {results['lambda_total_eff']:7.6f}")
    print(f"–ö–æ—ç—Ñ. –ø—Ä–æ—Å—Ç–æ—è Œ∑        | {results['eta_1']:7.6f} | {results['eta_2']:8.6f} | {results['eta_total']:7.6f}")
    print(f"–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è w       | {results['w_1']:7.3f} | {results['w_2']:8.3f} | {results['w_total']:7.3f}")
    print(f"–í—Ä–µ–º—è –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è u     | {results['u_1']:7.3f} | {results['u_2']:8.3f} | {results['u_total']:7.3f}")
    print("-" * 80)
    print()

if __name__ == "__main__":
    main()
